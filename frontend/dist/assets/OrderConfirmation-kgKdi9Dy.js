import{_ as Y,P as G,N as Q,u as J,G as K,r as m,o as X,a as Z,c as r,b as d,d as e,e as i,t as o,f as _,w as h,h as x,s as I,L as b,F as ee,j as te,m as se}from"./index-D5lSLxc0.js";const ae={class:"min-h-screen bg-gray-50 py-8"},oe={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},re={key:0,class:"flex justify-center items-center py-12"},de={key:1,class:"bg-red-50 border border-red-200 rounded-md p-4"},ne={class:"flex"},le={class:"ml-3"},ie={class:"mt-2 text-sm text-red-700"},ce={class:"mt-4"},ue={key:2,class:"space-y-6"},ge={class:"bg-white shadow rounded-lg overflow-hidden"},pe={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},me={class:"flex justify-between items-center"},xe={class:"text-xl font-semibold text-gray-900"},ve={class:"text-sm text-gray-600 mt-1"},ye={class:"text-right"},_e={class:"text-sm text-gray-500 mt-1"},he={class:"px-6 py-6"},be={key:0,class:"space-y-4"},fe={class:"flex-shrink-0"},we=["src","alt"],ke={key:1,class:"h-20 w-16 bg-gray-200 rounded-md flex items-center justify-center"},Ce={class:"flex-1 min-w-0"},je={class:"text-lg font-medium text-gray-900"},Pe={class:"flex items-center space-x-4 mt-1"},Se={class:"text-sm text-gray-600"},Me={class:"text-sm text-gray-500 mt-1"},De={class:"text-right flex-shrink-0"},Ae={class:"text-sm text-gray-600"},Ne={class:"text-sm text-gray-600"},Oe={class:"text-lg font-semibold text-gray-900 mt-1"},Ue={key:1,class:"text-center py-8 text-gray-500"},Ie={class:"px-6 py-6 border-t border-gray-200 bg-gray-50"},$e={class:"max-w-md ml-auto"},Fe={class:"space-y-2"},Le={class:"flex justify-between text-sm"},Te={class:"text-gray-900"},Ve={class:"flex justify-between text-sm"},Ee={class:"text-gray-900"},He={class:"flex justify-between text-sm"},Be={class:"text-gray-900"},Re={class:"border-t border-gray-200 pt-2"},ze={class:"flex justify-between text-lg font-semibold"},qe={class:"text-gray-900"},We={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ye={class:"bg-white shadow rounded-lg p-6"},Ge={key:0,class:"text-sm text-gray-600 space-y-1"},Qe={class:"font-medium text-gray-900"},Je={key:0},Ke={key:1,class:"pt-2"},Xe={key:1,class:"text-gray-500"},Ze={class:"bg-white shadow rounded-lg p-6"},et={class:"space-y-2 text-sm"},tt={class:"flex justify-between"},st={class:"text-gray-900"},at={key:0,class:"flex justify-between"},ot={class:"text-gray-900"},rt={class:"flex justify-between"},dt={class:"text-gray-900 font-mono text-xs"},nt={class:"flex justify-between"},lt={key:1,class:"flex justify-between"},it={class:"text-gray-900"},ct={key:0,class:"bg-white shadow rounded-lg p-6"},ut={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},gt={class:"flex items-center"},pt={class:"ml-3"},mt={class:"text-sm text-blue-700 mt-1"},xt={class:"font-mono"},vt={key:1,class:"text-gray-500 text-sm"},yt={class:"flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4"},_t={__name:"OrderConfirmation",setup(ht){const $=G(),F=Q(),L=J(),T=K(),a=m(null),v=m(!0),p=m(""),V=m(!0),E=async()=>{try{v.value=!0,p.value="";const s=$.params.id;if(!s)throw new Error("Order ID is required");const t=await se.get(`/orders/${s}`,{});if(t.status!=200)throw t.status===404?new Error("Order not found. Please check your order ID."):t.status===403?new Error("You do not have permission to view this order."):new Error("Failed to load order details.");const l=await t.data;a.value=l.order||l}catch(s){console.error("Error fetching order:",s),p.value=s.message}finally{v.value=!1}},y=s=>s?new Date(s).toLocaleDateString("en-CA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",H=s=>({pending:"Pending",processing:"Processing",shipped:"Shipped",delivered:"Delivered",cancelled:"Cancelled",refunded:"Refunded"})[s]||(s==null?void 0:s.charAt(0).toUpperCase())+(s==null?void 0:s.slice(1))||"Unknown",f=s=>({pending:"Pending",completed:"Completed",failed:"Failed",refunded:"Refunded"})[s]||(s==null?void 0:s.charAt(0).toUpperCase())+(s==null?void 0:s.slice(1))||"Unknown",B=s=>({nm:"Near Mint",near_mint:"Near Mint",lp:"Lightly Played",lightly_played:"Lightly Played",mp:"Moderately Played",moderately_played:"Moderately Played",hp:"Heavily Played",heavily_played:"Heavily Played",dmg:"Damaged",damaged:"Damaged"})[s]||(s==null?void 0:s.charAt(0).toUpperCase())+(s==null?void 0:s.slice(1))||"Unknown",R=s=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",z=s=>({pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",q=s=>({nm:"bg-green-100 text-green-800",near_mint:"bg-green-100 text-green-800",lp:"bg-blue-100 text-blue-800",lightly_played:"bg-blue-100 text-blue-800",mp:"bg-yellow-100 text-yellow-800",moderately_played:"bg-yellow-100 text-yellow-800",hp:"bg-orange-100 text-orange-800",heavily_played:"bg-orange-100 text-orange-800",dmg:"bg-red-100 text-red-800",damaged:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",W=()=>{var l,c,u,g;const s=`Support Request - Order #${((c=(l=a.value)==null?void 0:l.id)==null?void 0:c.slice(0,8))||"Unknown"}`,t=`Hello,

I need help with my order:
Order ID: ${((u=a.value)==null?void 0:u.id)||"Unknown"}
Order Date: ${(g=a.value)!=null&&g.created_at?y(a.value.created_at):"Unknown"}

Please describe your issue:

`;window.location.href=`mailto:support@mtgmarketplace.com?subject=${encodeURIComponent(s)}&body=${encodeURIComponent(t)}`};return X(async()=>{if(!L.isAuthenticated){T.error("Please sign in to view your order"),F.push("/auth/signin");return}await E()}),(s,t)=>{var c,u,g,w;const l=Z("router-link");return d(),r("div",ae,[e("div",oe,[v.value?(d(),r("div",re,[...t[0]||(t[0]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):p.value?(d(),r("div",de,[e("div",ne,[t[3]||(t[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",le,[t[2]||(t[2]=e("h3",{class:"text-sm font-medium text-red-800"},"Order Not Found",-1)),e("div",ie,o(p.value),1),e("div",ce,[_(l,{to:"/orders",class:"text-sm bg-red-100 text-red-800 px-3 py-1 rounded-md hover:bg-red-200"},{default:h(()=>[...t[1]||(t[1]=[x(" View All Orders ",-1)])]),_:1})])])])])):a.value?(d(),r("div",ue,[t[25]||(t[25]=I('<div class="bg-green-50 border border-green-200 rounded-lg p-6" data-v-8505745c><div class="flex items-center" data-v-8505745c><div class="flex-shrink-0" data-v-8505745c><svg class="h-8 w-8 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-8505745c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-8505745c></path></svg></div><div class="ml-4" data-v-8505745c><h1 class="text-2xl font-bold text-green-900" data-v-8505745c>Order Confirmed!</h1><p class="text-green-700 mt-1" data-v-8505745c>Thank you for your purchase. We&#39;ve received your order and are processing it now.</p></div></div></div>',1)),e("div",ge,[e("div",pe,[e("div",me,[e("div",null,[e("h2",xe,"Order #"+o(a.value.order_number),1),e("p",ve,"Placed on "+o(y(a.value.created_at)),1)]),e("div",ye,[e("span",{class:b([R(a.value.status),"inline-flex px-3 py-1 text-sm font-semibold rounded-full"])},o(H(a.value.status)),3),e("div",_e," Payment: "+o(f(a.value.payment_status)),1)])])]),e("div",he,[t[5]||(t[5]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Items Ordered",-1)),a.value.order_items&&a.value.order_items.length>0?(d(),r("div",be,[(d(!0),r(ee,null,te(a.value.order_items,n=>{var k,C,j,P,S,M,D,A,N,O,U;return d(),r("div",{key:n.id,class:"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors"},[e("div",fe,[(C=(k=n.listings)==null?void 0:k.cards)!=null&&C.image_url?(d(),r("img",{key:0,src:n.listings.cards.image_url,alt:n.listings.cards.name,class:"h-20 w-16 object-cover rounded-md shadow-sm"},null,8,we)):(d(),r("div",ke,[...t[4]||(t[4]=[e("svg",{class:"h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])]))]),e("div",Ce,[e("h4",je,o(((P=(j=n.listings)==null?void 0:j.cards)==null?void 0:P.name)||"Card Name"),1),e("div",Pe,[e("p",Se," Set: "+o(((M=(S=n.listings)==null?void 0:S.cards)==null?void 0:M.set_name)||"Unknown Set"),1),e("span",{class:b([q((D=n.listings)==null?void 0:D.condition),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},o(B((A=n.listings)==null?void 0:A.condition)),3)]),e("p",Me," Sold by: "+o(((O=(N=n.listings)==null?void 0:N.profiles)==null?void 0:O.display_name)||"Unknown Seller"),1)]),e("div",De,[e("div",Ae,"Qty: "+o(n.quantity),1),e("div",Ne,"Price: $"+o(((U=n.price_at_time)==null?void 0:U.toFixed(2))||"0.00"),1),e("div",Oe," $"+o(((n.price_at_time||0)*n.quantity).toFixed(2))+" CAD ",1)])])}),128))])):(d(),r("div",Ue," No items found for this order "))]),e("div",Ie,[e("div",$e,[e("div",Fe,[e("div",Le,[t[6]||(t[6]=e("span",{class:"text-gray-600"},"Subtotal:",-1)),e("span",Te,"$"+o(((c=a.value.subtotal)==null?void 0:c.toFixed(2))||"0.00")+" CAD",1)]),e("div",Ve,[t[7]||(t[7]=e("span",{class:"text-gray-600"},"Shipping:",-1)),e("span",Ee,"$"+o(((u=a.value.shipping_cost)==null?void 0:u.toFixed(2))||"0.00")+" CAD",1)]),e("div",He,[t[8]||(t[8]=e("span",{class:"text-gray-600"},"Tax (HST):",-1)),e("span",Be,"$"+o(((g=a.value.tax_amount)==null?void 0:g.toFixed(2))||"0.00")+" CAD",1)]),e("div",Re,[e("div",ze,[t[9]||(t[9]=e("span",{class:"text-gray-900"},"Total:",-1)),e("span",qe,"$"+o(((w=a.value.total_amount)==null?void 0:w.toFixed(2))||"0.00")+" CAD",1)])])])])])]),e("div",We,[e("div",Ye,[t[10]||(t[10]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Shipping Address",-1)),a.value.shipping_address?(d(),r("div",Ge,[e("div",Qe,o(a.value.shipping_address.name),1),e("div",null,o(a.value.shipping_address.street1),1),a.value.shipping_address.street2?(d(),r("div",Je,o(a.value.shipping_address.street2),1)):i("",!0),e("div",null,o(a.value.shipping_address.city)+", "+o(a.value.shipping_address.province)+" "+o(a.value.shipping_address.postalCode),1),e("div",null,o(a.value.shipping_address.country),1),a.value.shipping_address.phone?(d(),r("div",Ke," Phone: "+o(a.value.shipping_address.phone),1)):i("",!0)])):(d(),r("div",Xe,"No shipping address on file"))]),e("div",Ze,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Payment Information",-1)),e("div",et,[e("div",tt,[t[11]||(t[11]=e("span",{class:"text-gray-600"},"Payment Method:",-1)),e("span",st,o(a.value.payment_method||"Credit Card"),1)]),a.value.card_last_four?(d(),r("div",at,[t[12]||(t[12]=e("span",{class:"text-gray-600"},"Card:",-1)),e("span",ot,"****"+o(a.value.card_last_four),1)])):i("",!0),e("div",rt,[t[13]||(t[13]=e("span",{class:"text-gray-600"},"Transaction ID:",-1)),e("span",dt,o(a.value.helcim_transaction_id||"N/A"),1)]),e("div",nt,[t[14]||(t[14]=e("span",{class:"text-gray-600"},"Payment Status:",-1)),e("span",{class:b([z(a.value.payment_status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},o(f(a.value.payment_status)),3)]),a.value.paid_at?(d(),r("div",lt,[t[15]||(t[15]=e("span",{class:"text-gray-600"},"Paid At:",-1)),e("span",it,o(y(a.value.paid_at)),1)])):i("",!0)])])]),a.value.tracking_number||V.value?(d(),r("div",ct,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Tracking Information",-1)),a.value.tracking_number?(d(),r("div",ut,[e("div",gt,[t[20]||(t[20]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2 2v-5m16 0h-2M4 13h2m-2 0v5a2 2 0 002 2h2M4 13v-5a2 2 0 012-2h2"})])],-1)),e("div",pt,[t[18]||(t[18]=e("p",{class:"text-sm font-medium text-blue-800"},"Your order has shipped!",-1)),e("p",mt,[t[17]||(t[17]=x(" Tracking Number: ",-1)),e("span",xt,o(a.value.tracking_number),1)]),t[19]||(t[19]=e("p",{class:"text-sm text-blue-600 mt-1"}," Estimated delivery: 3-7 business days ",-1))])])])):(d(),r("div",vt,[...t[21]||(t[21]=[e("p",null,"Tracking information will be provided once your order ships.",-1),e("p",{class:"mt-1"},"We'll send you an email notification with tracking details.",-1)])]))])):i("",!0),t[26]||(t[26]=I('<div class="bg-blue-50 border border-blue-200 rounded-lg p-6" data-v-8505745c><h3 class="text-lg font-medium text-blue-900 mb-3" data-v-8505745c>What Happens Next?</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4" data-v-8505745c><div class="text-center" data-v-8505745c><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2" data-v-8505745c><span class="text-blue-600 font-semibold" data-v-8505745c>1</span></div><h4 class="font-medium text-blue-900" data-v-8505745c>Processing</h4><p class="text-sm text-blue-700 mt-1" data-v-8505745c>We&#39;re preparing your cards for shipment</p></div><div class="text-center" data-v-8505745c><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2" data-v-8505745c><span class="text-blue-600 font-semibold" data-v-8505745c>2</span></div><h4 class="font-medium text-blue-900" data-v-8505745c>Shipping</h4><p class="text-sm text-blue-700 mt-1" data-v-8505745c>Your order will ship with tracking</p></div><div class="text-center" data-v-8505745c><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2" data-v-8505745c><span class="text-blue-600 font-semibold" data-v-8505745c>3</span></div><h4 class="font-medium text-blue-900" data-v-8505745c>Delivery</h4><p class="text-sm text-blue-700 mt-1" data-v-8505745c>Enjoy your new cards!</p></div></div></div>',1)),e("div",yt,[_(l,{to:"/orders",class:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium"},{default:h(()=>[...t[23]||(t[23]=[x(" View All Orders ",-1)])]),_:1}),_(l,{to:"/cards",class:"bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium"},{default:h(()=>[...t[24]||(t[24]=[x(" Continue Shopping ",-1)])]),_:1}),e("button",{onClick:W,class:"bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium"}," Contact Support ")])])):i("",!0)])])}}},ft=Y(_t,[["__scopeId","data-v-8505745c"]]);export{ft as default};
