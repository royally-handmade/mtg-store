import{c as i,b as l,d as t,N as q,Q as M,G as B,o as D,a as E,e as u,i as n,f as d,l as N,w as y,h as m,F as A,j as I,t as a,L as f}from"./index-D5lSLxc0.js";import{r as L}from"./PlusIcon-BDGik3-F.js";import{r as T}from"./TrashIcon-Ok0xa92g.js";function z(v,p){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})])}const F={class:"space-y-6"},P={class:"flex justify-between items-center"},U={key:0,class:"text-center py-8"},V={key:1,class:"text-center py-12"},G={key:2,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},H={class:"lg:col-span-2 space-y-4"},O={class:"flex items-start space-x-4"},Q=["src","alt"],R={class:"flex-1"},Y={class:"font-semibold text-lg"},J={class:"text-gray-600 text-sm"},K={class:"flex items-center gap-2 mt-1"},W={key:0,class:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs font-medium"},X={key:1,class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs font-medium"},Z={class:"mt-2 space-y-1"},tt={class:"flex items-center text-sm text-gray-600"},st={class:"text-yellow-500 ml-1"},et={class:"flex items-center text-sm text-gray-600"},ot={key:0,class:"flex items-center text-sm text-gray-500"},rt={class:"flex items-center justify-between mt-4"},nt={class:"flex items-center space-x-2"},at=["onClick"],it={class:"px-3 py-1 bg-gray-100 rounded"},lt=["onClick","disabled"],dt={key:0,class:"text-xs text-gray-500 ml-2"},ct=["onClick"],ut={class:"text-right"},gt={class:"text-lg font-semibold"},yt={class:"text-sm text-gray-600"},pt={class:"lg:col-span-1"},mt={class:"bg-white rounded-lg shadow p-6 sticky top-6"},xt={class:"space-y-3 text-sm"},ht={class:"flex justify-between"},_t={class:"flex justify-between"},bt={class:"flex justify-between"},ft={class:"border-t pt-3 flex justify-between font-bold text-lg"},vt={key:0,class:"mt-4 pt-3 border-t"},wt={class:"text-xs text-gray-600 mb-2"},kt=["disabled"],jt={__name:"Cart",setup(v){const p=q(),r=M(),c=B(),w=o=>({near_mint:"Near Mint",nm:"Near Mint",lightly_played:"Lightly Played",moderately_played:"Moderately Played",heavily_played:"Heavily Played",damaged:"Damaged"})[o]||o.replace("_"," ").toUpperCase(),k=o=>({near_mint:"bg-green-100 text-green-800",nm:"bg-green-100 text-green-800",lightly_played:"bg-blue-100 text-blue-800",moderately_played:"bg-yellow-100 text-yellow-800",heavily_played:"bg-orange-100 text-orange-800",damaged:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",x=o=>{var s;return(s=o==null?void 0:o.shipping_address)!=null&&s.country?o.shipping_address.country==="CA"?"Canada":o.shipping_address.country==="US"?"United States":o.shipping_address.country:"Canada"},h=o=>{const s=x(o);return s==="Canada"?"Estimated 2-5 business days":s==="United States"?"Estimated 5-10 business days":"Estimated 7-14 business days"},_=async(o,s)=>{try{await r.updateQuantity(o,s),s===0&&c.success("Item removed from cart")}catch{c.error("Error updating quantity")}},C=async o=>{try{await r.removeItem(o),c.success("Item removed from cart")}catch{c.error("Error removing item")}},S=async()=>{if(confirm("Are you sure you want to clear your cart?"))try{await r.clearCart(),c.success("Cart cleared")}catch{c.error("Error clearing cart")}},$=()=>{p.push("/checkout")},j=()=>{p.push("/cards")};return D(()=>{r.fetchCart()}),(o,s)=>{const g=E("router-link");return l(),i("div",F,[t("div",P,[s[0]||(s[0]=t("h1",{class:"text-3xl font-bold"},"Shopping Cart",-1)),n(r).items.length>0?(l(),i("button",{key:0,onClick:S,class:"text-red-600 hover:text-red-800 text-sm"}," Clear Cart ")):u("",!0)]),n(r).loading?(l(),i("div",U,[...s[1]||(s[1]=[t("div",{class:"text-gray-500"},"Loading cart...",-1)])])):n(r).items.length===0?(l(),i("div",V,[d(n(N),{class:"h-24 w-24 mx-auto text-gray-300 mb-4"}),s[3]||(s[3]=t("h2",{class:"text-xl font-semibold text-gray-500 mb-2"},"Your cart is empty",-1)),s[4]||(s[4]=t("p",{class:"text-gray-400 mb-6"},"Add some cards to get started!",-1)),d(g,{to:"/cards",class:"btn-primary"},{default:y(()=>[...s[2]||(s[2]=[m(" Browse Cards ",-1)])]),_:1})])):(l(),i("div",G,[t("div",H,[(l(!0),i(A,null,I(n(r).items,e=>(l(),i("div",{key:e.id,class:"bg-white rounded-lg shadow p-6"},[t("div",O,[d(g,{to:`/card/${e.listings.cards.id}`},{default:y(()=>[t("img",{src:e.listings.cards.image_url,alt:e.listings.cards.name,class:"w-16 h-22 object-cover rounded hover:opacity-75 transition-opacity cursor-pointer"},null,8,Q)]),_:2},1032,["to"]),t("div",R,[d(g,{to:`/card/${e.listings.cards.id}`,class:"hover:text-blue-600 transition-colors"},{default:y(()=>[t("h3",Y,a(e.listings.cards.name),1)]),_:2},1032,["to"]),t("p",J,a(e.listings.cards.set_number),1),t("div",K,[t("span",{class:f(["px-2 py-1 rounded text-xs font-medium",k(e.listings.condition)])},a(w(e.listings.condition)),3),e.listings.foil?(l(),i("span",W," FOIL ")):u("",!0),e.listings.signed?(l(),i("span",X," SIGNED ")):u("",!0)]),t("div",Z,[t("div",tt,[s[5]||(s[5]=t("span",{class:"font-medium"},"Sold by:",-1)),d(g,{to:`/seller/${e.listings.seller_id}`,class:"ml-1 text-blue-600 hover:text-blue-800 font-medium"},{default:y(()=>[m(a(e.listings.profiles.display_name),1)]),_:2},1032,["to"]),t("span",st," â˜… "+a(e.listings.profiles.rating||"New"),1)]),t("div",et,[s[6]||(s[6]=t("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),t("span",null,"Ships from "+a(x(e.listings.profiles)),1)]),h(e.listings.profiles)?(l(),i("div",ot,[s[7]||(s[7]=t("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,a(h(e.listings.profiles)),1)])):u("",!0)]),t("div",rt,[t("div",nt,[t("button",{onClick:b=>_(e.id,e.quantity-1),class:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-100"},[d(n(z),{class:"h-4 w-4"})],8,at),t("span",it,a(e.quantity),1),t("button",{onClick:b=>_(e.id,e.quantity+1),disabled:e.quantity>=e.listings.quantity,class:f(["w-8 h-8 rounded-full border flex items-center justify-center",e.quantity>=e.listings.quantity?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 hover:bg-gray-100"])},[d(n(L),{class:"h-4 w-4"})],10,lt),e.quantity>=e.listings.quantity?(l(),i("span",dt," (Max available) ")):u("",!0)]),t("button",{onClick:b=>C(e.id),class:"text-red-600 hover:text-red-800"},[d(n(T),{class:"h-5 w-5"})],8,ct)])]),t("div",ut,[t("div",gt," $"+a((parseFloat(e.listings.price)*e.quantity).toFixed(2))+" CAD ",1),t("div",yt," $"+a(e.listings.price)+" each ",1)])])]))),128))]),t("div",pt,[t("div",mt,[s[13]||(s[13]=t("h2",{class:"text-xl font-bold mb-4"},"Order Summary",-1)),t("div",xt,[t("div",ht,[t("span",null,"Items ("+a(n(r).summary.itemCount)+"):",1),t("span",null,"$"+a(n(r).summary.subtotal)+" CAD",1)]),t("div",_t,[s[8]||(s[8]=t("span",null,"Shipping:",-1)),t("span",null,a(n(r).summary.estimatedShipping==="0.00"?"TBD":`$${n(r).summary.estimatedShipping} CAD`),1)]),t("div",bt,[s[9]||(s[9]=t("span",null,"Tax (HST):",-1)),t("span",null,"$"+a(n(r).summary.tax)+" CAD",1)]),t("div",ft,[s[10]||(s[10]=t("span",null,"Total:",-1)),t("span",null,"$"+a(n(r).summary.total)+" CAD",1)]),n(r).summary.uniqueSellers>1?(l(),i("div",vt,[t("div",wt,[s[11]||(s[11]=t("svg",{class:"inline h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),m(" Items from "+a(n(r).summary.uniqueSellers)+" different sellers ",1)]),s[12]||(s[12]=t("div",{class:"text-xs text-gray-500"}," Shipping costs calculated at checkout ",-1))])):u("",!0)]),t("button",{onClick:$,disabled:n(r).items.length===0,class:"w-full mt-6 bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Proceed to Checkout ",8,kt),t("button",{onClick:j,class:"w-full mt-3 border border-gray-300 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-50 transition-colors"}," Continue Shopping ")])])]))])}}};export{jt as default};
