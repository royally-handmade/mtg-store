import{_ as X,N as ee,Q as te,u as se,G as le,O as L,r as w,n as E,p as R,o as oe,c as i,b as n,d as t,e as k,q as c,J as m,v as K,s as F,K as J,i as C,F as j,j as U,t as r,h as q,m as M}from"./index-D5lSLxc0.js";const ae={class:"min-h-screen bg-gray-50 py-8"},re={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},ie={class:"bg-white rounded-lg shadow-lg overflow-hidden"},ne={class:"flex flex-col lg:flex-row"},de={class:"flex-1 px-6 py-6"},ue={class:"space-y-8"},ce={class:"space-y-4"},pe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},me={class:"sm:col-span-2"},ye={class:"sm:col-span-2"},ge={class:"sm:col-span-2"},ve={class:"sm:col-span-2"},be={class:"space-y-4"},fe={class:"flex items-center space-x-3 mb-4"},xe={key:0,class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},he={class:"sm:col-span-2"},we={class:"sm:col-span-2"},ke={class:"sm:col-span-2"},Ce={class:"space-y-4"},Se={class:"bg-gray-50 border border-gray-200 rounded-md p-4"},Pe={key:0,class:"space-y-2"},_e={class:"flex-1"},Ae={class:"font-medium"},Fe={class:"text-gray-500 ml-2"},je={class:"font-medium"},Ue={class:"mt-4 pt-4 border-t border-gray-200 space-y-2"},qe={class:"flex justify-between text-sm"},He={class:"flex justify-between text-sm"},Ve={key:0},Te={key:1,class:"text-gray-500"},Ee={key:0,class:"ml-4 mt-2 space-y-1"},Me={class:"truncate max-w-[200px]"},ze={class:"flex justify-between text-sm"},Oe={class:"flex justify-between font-bold text-lg pt-2 border-t border-gray-200"},$e={class:"flex items-start space-x-3"},Be={class:"space-y-4"},Ie={class:"pt-6 border-t border-gray-200"},De=["disabled"],Ne={key:0,class:"flex items-center"},Le={key:1},Re={class:"w-full lg:w-96 bg-gray-50 px-6 py-6"},Ke={key:0,class:"space-y-3 mb-6"},Je=["src","alt"],Ye={class:"flex-1 min-w-0"},Ge={class:"text-sm font-medium text-gray-900 truncate"},Qe={class:"text-xs text-gray-500"},Ze={class:"text-xs text-gray-500"},We={class:"text-sm font-medium text-gray-900"},Xe={class:"space-y-2 text-sm border-t border-gray-200 pt-4"},et={class:"flex justify-between"},tt={class:"flex justify-between"},st={key:0},lt={key:1,class:"text-gray-500"},ot={key:0,class:"ml-4 space-y-1"},at={class:"truncate max-w-[120px]"},rt={class:"flex justify-between"},it={class:"flex justify-between font-bold text-base pt-2 border-t border-gray-200"},nt={key:0,class:"mt-4 bg-red-50 border border-red-200 rounded-md p-4"},dt={class:"flex"},ut={class:"ml-3"},ct={class:"mt-2 text-sm text-red-700"},pt={__name:"Checkout",setup(mt){const H=ee(),d=te(),A=se(),V=le(),l=L({name:"",street1:"",street2:"",city:"",province:"",postalCode:"",country:"CA",phone:""}),u=L({name:"",street1:"",street2:"",city:"",province:"",postalCode:"",country:"CA"}),f=w(!0),T=w(!1),v=w(!1),x=w(""),y=w(null),h=w([]),z=w(null),S=E(()=>{const o=parseFloat(d.summary.subtotal||0),e=parseFloat(y.value||0),s=o+e,a=l.country==="CA"?.13:0;return s*a}),P=E(()=>{const o=parseFloat(d.summary.subtotal||0),e=parseFloat(y.value||0),s=S.value;return o+e+s}),O=E(()=>l.name&&l.street1&&l.city&&l.province&&l.postalCode&&l.country&&T.value&&y.value!==null&&!v.value),$=o=>({near_mint:"Near Mint",lightly_played:"Lightly Played",moderately_played:"Moderately Played",heavily_played:"Heavily Played",damaged:"Damaged"})[o]||o.replace("_"," ").toUpperCase(),B=()=>{f.value&&Object.assign(u,{name:l.name,street1:l.street1,street2:l.street2,city:l.city,province:l.province,postalCode:l.postalCode,country:l.country})},I=async()=>{try{if(!l.country||!l.city||!l.province){y.value=null;return}const o=await M.post("/shipping/calculate",{items:d.items.map(e=>{var s;return{listing_id:((s=e.listings)==null?void 0:s.id)||e.id,quantity:e.quantity}}),shipping_address:{name:l.name||"Customer",street1:l.street1,street2:l.street2,city:l.city,province:l.province,postalCode:l.postalCode,country:l.country,phone:l.phone}});if(o.ok){const e=await o.data;if(e.success)y.value=parseFloat(e.totalCost),h.value=e.shipments;else throw new Error(e.error||"Shipping calculation failed")}else{const e=await o.error;throw new Error(e.error||"Shipping calculation failed")}}catch(o){console.error("Error calculating shipping:",o);const e=new Set(d.items.map(s=>{var a;return(a=s.listings)==null?void 0:a.seller_id})).size;y.value=e*5.99,h.value=[]}},Y=async()=>{var o;try{const e=await M.post("/payment/helcim/initialize",{paymentType:"purchase",amount:P.value,currency:"CAD",items:d.items.map(a=>{var p,g,b,_;return{listing_id:((p=a.listings)==null?void 0:p.id)||a.id,quantity:a.quantity,name:(b=(g=a.listings)==null?void 0:g.cards)==null?void 0:b.name,price:(_=a.listings)==null?void 0:_.price}}),shipping_address:l,billing_address:f.value?l:u,subtotal:parseFloat(d.summary.subtotal),shipping_cost:y.value,tax_amount:S.value,customer:{email:(o=A.user)==null?void 0:o.email,name:l.name}});if(e.status!=200){const a=await e;throw new Error(a.error||"Failed to initialize payment session")}return(await e.data).checkoutToken}catch(e){throw console.error("Error initializing HelcimPay session:",e),e}},G=()=>new Promise((o,e)=>{if(window.appendHelcimPayIframe){o();return}const s=document.createElement("script");s.src="https://secure.helcim.app/helcim-pay/services/start.js",s.type="text/javascript",s.onload=()=>{console.log("HelcimPay.js script loaded successfully"),o()},s.onerror=a=>{console.error("Failed to load HelcimPay.js script:",a),e(new Error("Failed to load HelcimPay.js script"))},document.head.appendChild(s)}),Q=async()=>{if(!O.value){x.value="Please complete all required fields before proceeding.";return}v.value=!0,x.value="";try{await G();const o=await Y();z.value=o;const e=s=>{const a="helcim-pay-js-"+o;s.data.eventName===a&&(window.removeEventListener("message",e),s.data.eventStatus==="SUCCESS"?(console.log("Payment successful:",s.data.eventMessage),Z(s.data.eventMessage)):s.data.eventStatus==="ABORTED"?(console.error("Payment failed:",s.data),W(s.data.eventMessage)):s.data.eventStatus==="HIDE"&&(console.log("Payment modal closed"),v.value=!1))};window.addEventListener("message",e),window.appendHelcimPayIframe(o,!0)}catch(o){console.error("Payment initialization error:",o),x.value=o.message||"Failed to initialize secure payment. Please try again.",v.value=!1}},Z=async o=>{try{window.removeHelcimPayIframe&&window.removeHelcimPayIframe();let e;try{e=typeof o=="string"?JSON.parse(o):o}catch(p){throw console.error("Failed to parse payment response:",p),new Error("Invalid payment response format")}const s=await M.post("/payment/helcim/complete-order",{checkoutToken:z.value,paymentResponse:e,order_data:{items:d.items.map(p=>{var g;return{listing_id:((g=p.listings)==null?void 0:g.id)||p.id,quantity:p.quantity}}),shipping_address:l,billing_address:f.value?l:u,subtotal:parseFloat(d.summary.subtotal),shipping_cost:y.value,tax_amount:S.value,total_amount:P.value,shipping_details:h.value}});if(s.status!=200){const p=await s;throw new Error(p.error||"Failed to complete order")}const a=await s.data;if(a.success)await d.clearCart(),V.success("Order placed successfully!"),H.push(`/orders/${a.order.id}?new=true`);else throw new Error(a.error||"Order completion failed")}catch(e){console.error("Order completion error:",e),x.value=e.message||"Failed to complete your order. Please contact support with your transaction details."}finally{v.value=!1}},W=o=>{console.error("HelcimPay payment error:",o),window.removeHelcimPayIframe&&window.removeHelcimPayIframe();let e="Payment failed. Please try again.";typeof o=="string"?e=o:o&&o.error?e=o.error:o&&o.message&&(e=o.message),x.value=e,v.value=!1};return R([()=>l.country,()=>l.province,()=>l.city],()=>{I()},{deep:!0}),R(f,B),oe(async()=>{var o;if(!A.isAuthenticated){V.error("Please sign in to checkout"),H.push("/auth/signin?redirect=/checkout");return}if(d.items.length===0){V.error("Your cart is empty"),H.push("/cards");return}await d.fetchCart(),(o=A.user)!=null&&o.shipping_address&&Object.assign(l,A.user.shipping_address),await I()}),(o,e)=>(n(),i("div",ae,[t("div",re,[t("div",ie,[e[54]||(e[54]=t("div",{class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Checkout"),t("p",{class:"text-gray-600 mt-1"},"Complete your purchase securely with HelcimPay")],-1)),t("div",ne,[t("div",de,[t("div",ue,[t("div",ce,[e[26]||(e[26]=t("div",{class:"flex items-center mb-4"},[t("span",{class:"flex items-center justify-center h-8 w-8 rounded-full bg-blue-600 text-white text-sm font-medium mr-3"},"1"),t("h2",{class:"text-xl font-semibold text-gray-900"},"Shipping Address")],-1)),t("div",pe,[t("div",me,[e[17]||(e[17]=t("label",{for:"shipping-name",class:"block text-sm font-medium text-gray-700"},"Full Name *",-1)),c(t("input",{id:"shipping-name","onUpdate:modelValue":e[0]||(e[0]=s=>l.name=s),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"John Doe"},null,512),[[m,l.name]])]),t("div",ye,[e[18]||(e[18]=t("label",{for:"shipping-street1",class:"block text-sm font-medium text-gray-700"},"Street Address *",-1)),c(t("input",{id:"shipping-street1","onUpdate:modelValue":e[1]||(e[1]=s=>l.street1=s),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"123 Main Street"},null,512),[[m,l.street1]])]),t("div",ge,[e[19]||(e[19]=t("label",{for:"shipping-street2",class:"block text-sm font-medium text-gray-700"},"Apt, Suite, etc. (Optional)",-1)),c(t("input",{id:"shipping-street2","onUpdate:modelValue":e[2]||(e[2]=s=>l.street2=s),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Apartment, suite, unit, etc."},null,512),[[m,l.street2]])]),t("div",null,[e[20]||(e[20]=t("label",{for:"shipping-city",class:"block text-sm font-medium text-gray-700"},"City *",-1)),c(t("input",{id:"shipping-city","onUpdate:modelValue":e[3]||(e[3]=s=>l.city=s),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Toronto"},null,512),[[m,l.city]])]),t("div",null,[e[21]||(e[21]=t("label",{for:"shipping-province",class:"block text-sm font-medium text-gray-700"},"Province/State *",-1)),c(t("input",{id:"shipping-province","onUpdate:modelValue":e[4]||(e[4]=s=>l.province=s),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"ON"},null,512),[[m,l.province]])]),t("div",null,[e[22]||(e[22]=t("label",{for:"shipping-postal",class:"block text-sm font-medium text-gray-700"},"Postal/Zip Code *",-1)),c(t("input",{id:"shipping-postal","onUpdate:modelValue":e[5]||(e[5]=s=>l.postalCode=s),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"K1A 0A6"},null,512),[[m,l.postalCode]])]),t("div",null,[e[24]||(e[24]=t("label",{for:"shipping-country",class:"block text-sm font-medium text-gray-700"},"Country *",-1)),c(t("select",{id:"shipping-country","onUpdate:modelValue":e[6]||(e[6]=s=>l.country=s),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},[...e[23]||(e[23]=[F('<option value="" data-v-c83309c3>Select Country</option><option value="CA" data-v-c83309c3>Canada</option><option value="US" data-v-c83309c3>United States</option><option value="GB" data-v-c83309c3>United Kingdom</option><option value="AU" data-v-c83309c3>Australia</option>',5)])],512),[[K,l.country]])]),t("div",ve,[e[25]||(e[25]=t("label",{for:"shipping-phone",class:"block text-sm font-medium text-gray-700"},"Phone Number",-1)),c(t("input",{id:"shipping-phone","onUpdate:modelValue":e[7]||(e[7]=s=>l.phone=s),type:"tel",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"+1 (555) 123-4567"},null,512),[[m,l.phone]])])])]),t("div",be,[e[36]||(e[36]=t("div",{class:"flex items-center mb-4"},[t("span",{class:"flex items-center justify-center h-8 w-8 rounded-full bg-blue-600 text-white text-sm font-medium mr-3"},"2"),t("h2",{class:"text-xl font-semibold text-gray-900"},"Billing Address")],-1)),t("div",fe,[c(t("input",{id:"same-address","onUpdate:modelValue":e[8]||(e[8]=s=>f.value=s),onChange:B,type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,544),[[J,f.value]]),e[27]||(e[27]=t("label",{for:"same-address",class:"text-sm text-gray-700"}," My billing address is the same as my shipping address ",-1))]),f.value?k("",!0):(n(),i("div",xe,[t("div",he,[e[28]||(e[28]=t("label",{for:"billing-name",class:"block text-sm font-medium text-gray-700"},"Full Name *",-1)),c(t("input",{id:"billing-name","onUpdate:modelValue":e[9]||(e[9]=s=>u.name=s),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"John Doe"},null,512),[[m,u.name]])]),t("div",we,[e[29]||(e[29]=t("label",{for:"billing-street1",class:"block text-sm font-medium text-gray-700"},"Street Address *",-1)),c(t("input",{id:"billing-street1","onUpdate:modelValue":e[10]||(e[10]=s=>u.street1=s),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"123 Main Street"},null,512),[[m,u.street1]])]),t("div",ke,[e[30]||(e[30]=t("label",{for:"billing-street2",class:"block text-sm font-medium text-gray-700"},"Apt, Suite, etc. (Optional)",-1)),c(t("input",{id:"billing-street2","onUpdate:modelValue":e[11]||(e[11]=s=>u.street2=s),type:"text",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Apartment, suite, unit, etc."},null,512),[[m,u.street2]])]),t("div",null,[e[31]||(e[31]=t("label",{for:"billing-city",class:"block text-sm font-medium text-gray-700"},"City *",-1)),c(t("input",{id:"billing-city","onUpdate:modelValue":e[12]||(e[12]=s=>u.city=s),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Toronto"},null,512),[[m,u.city]])]),t("div",null,[e[32]||(e[32]=t("label",{for:"billing-province",class:"block text-sm font-medium text-gray-700"},"Province/State *",-1)),c(t("input",{id:"billing-province","onUpdate:modelValue":e[13]||(e[13]=s=>u.province=s),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"ON"},null,512),[[m,u.province]])]),t("div",null,[e[33]||(e[33]=t("label",{for:"billing-postal",class:"block text-sm font-medium text-gray-700"},"Postal/Zip Code *",-1)),c(t("input",{id:"billing-postal","onUpdate:modelValue":e[14]||(e[14]=s=>u.postalCode=s),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"K1A 0A6"},null,512),[[m,u.postalCode]])]),t("div",null,[e[35]||(e[35]=t("label",{for:"billing-country",class:"block text-sm font-medium text-gray-700"},"Country *",-1)),c(t("select",{id:"billing-country","onUpdate:modelValue":e[15]||(e[15]=s=>u.country=s),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},[...e[34]||(e[34]=[F('<option value="" data-v-c83309c3>Select Country</option><option value="CA" data-v-c83309c3>Canada</option><option value="US" data-v-c83309c3>United States</option><option value="GB" data-v-c83309c3>United Kingdom</option><option value="AU" data-v-c83309c3>Australia</option>',5)])],512),[[K,u.country]])])]))]),t("div",Ce,[e[43]||(e[43]=t("div",{class:"flex items-center mb-4"},[t("span",{class:"flex items-center justify-center h-8 w-8 rounded-full bg-blue-600 text-white text-sm font-medium mr-3"},"3"),t("h2",{class:"text-xl font-semibold text-gray-900"},"Review Your Order")],-1)),t("div",Se,[e[41]||(e[41]=t("h3",{class:"font-medium text-gray-900 mb-3"},"Order Summary",-1)),C(d).items.length>0?(n(),i("div",Pe,[(n(!0),i(j,null,U(C(d).items,s=>{var a,p,g,b;return n(),i("div",{key:s.id,class:"flex justify-between items-center text-sm"},[t("div",_e,[t("span",Ae,r((p=(a=s.listings)==null?void 0:a.cards)==null?void 0:p.name),1),t("span",Fe,"("+r($((g=s.listings)==null?void 0:g.condition))+") x"+r(s.quantity),1)]),t("span",je,"$"+r((((b=s.listings)==null?void 0:b.price)*s.quantity).toFixed(2))+" CAD",1)])}),128))])):k("",!0),t("div",Ue,[t("div",qe,[e[37]||(e[37]=t("span",null,"Subtotal:",-1)),t("span",null,"$"+r(C(d).summary.subtotal)+" CAD",1)]),t("div",He,[e[38]||(e[38]=t("span",null,"Shipping:",-1)),y.value!==null?(n(),i("span",Ve,"$"+r(y.value.toFixed(2))+" CAD",1)):(n(),i("span",Te,"Calculating..."))]),h.value.length>1?(n(),i("div",Ee,[(n(!0),i(j,null,U(h.value,s=>(n(),i("div",{key:s.seller_id,class:"flex justify-between text-xs text-gray-600"},[t("span",Me,r(s.seller_name)+":",1),t("span",null,"$"+r(s.shipping_cost.toFixed(2))+" ("+r(s.service_name)+")",1)]))),128))])):k("",!0),t("div",ze,[e[39]||(e[39]=t("span",null,"Tax (HST):",-1)),t("span",null,"$"+r(S.value.toFixed(2))+" CAD",1)]),t("div",Oe,[e[40]||(e[40]=t("span",null,"Total:",-1)),t("span",null,"$"+r(P.value.toFixed(2))+" CAD",1)])])]),t("div",$e,[c(t("input",{id:"terms-agreement","onUpdate:modelValue":e[16]||(e[16]=s=>T.value=s),type:"checkbox",required:"",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[J,T.value]]),e[42]||(e[42]=t("label",{for:"terms-agreement",class:"text-sm text-gray-700"},[q(" I agree to the "),t("a",{href:"/terms",target:"_blank",class:"text-blue-600 hover:text-blue-500"},"Terms of Service"),q(" and "),t("a",{href:"/privacy",target:"_blank",class:"text-blue-600 hover:text-blue-500"},"Privacy Policy")],-1))])]),t("div",Be,[e[47]||(e[47]=F('<div class="flex items-center mb-4" data-v-c83309c3><span class="flex items-center justify-center h-8 w-8 rounded-full bg-blue-600 text-white text-sm font-medium mr-3" data-v-c83309c3>4</span><h2 class="text-xl font-semibold text-gray-900" data-v-c83309c3>Secure Payment</h2></div><div class="bg-green-50 border border-green-200 rounded-md p-4 mb-4" data-v-c83309c3><div class="flex" data-v-c83309c3><div class="flex-shrink-0" data-v-c83309c3><svg class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor" data-v-c83309c3><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" data-v-c83309c3></path></svg></div><div class="ml-3" data-v-c83309c3><h3 class="text-sm font-medium text-green-800" data-v-c83309c3>PCI-Compliant Secure Payment</h3><div class="mt-2 text-sm text-green-700" data-v-c83309c3><p data-v-c83309c3>Your payment is processed securely through HelcimPay. Your credit card information never touches our servers, ensuring maximum security and PCI compliance.</p></div></div></div></div>',2)),t("div",Ie,[t("button",{type:"button",onClick:Q,disabled:!O.value||v.value,class:"w-full bg-green-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center"},[v.value?(n(),i("span",Ne,[...e[44]||(e[44]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),q(" Setting up secure payment... ",-1)])])):(n(),i("span",Le,[e[45]||(e[45]=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1)),q(" Pay Securely with HelcimPay - $"+r(P.value.toFixed(2))+" CAD ",1)]))],8,De),e[46]||(e[46]=t("p",{class:"text-xs text-gray-500 text-center mt-2"}," 🔒 Secured by SSL encryption and HelcimPay tokenization ",-1))])])])]),t("div",Re,[e[52]||(e[52]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Your Order",-1)),C(d).items.length>0?(n(),i("div",Ke,[(n(!0),i(j,null,U(C(d).items,s=>{var a,p,g,b,_,D,N;return n(),i("div",{key:s.id,class:"flex items-center space-x-3 pb-3 border-b border-gray-200 last:border-b-0"},[(p=(a=s.listings)==null?void 0:a.cards)!=null&&p.image_url?(n(),i("img",{key:0,src:s.listings.cards.image_url,alt:s.listings.cards.name,class:"h-16 w-12 object-cover rounded-md flex-shrink-0"},null,8,Je)):k("",!0),t("div",Ye,[t("h4",Ge,r((b=(g=s.listings)==null?void 0:g.cards)==null?void 0:b.name),1),t("p",Qe,r($((_=s.listings)==null?void 0:_.condition)),1),t("p",Ze," Qty: "+r(s.quantity)+" × $"+r((D=s.listings)==null?void 0:D.price),1)]),t("div",We," $"+r((((N=s.listings)==null?void 0:N.price)*s.quantity).toFixed(2)),1)])}),128))])):k("",!0),t("div",Xe,[t("div",et,[e[48]||(e[48]=t("span",null,"Subtotal:",-1)),t("span",null,"$"+r(C(d).summary.subtotal)+" CAD",1)]),t("div",tt,[e[49]||(e[49]=t("span",null,"Shipping:",-1)),y.value!==null?(n(),i("span",st,"$"+r(y.value.toFixed(2))+" CAD",1)):(n(),i("span",lt,"TBD"))]),h.value.length>1?(n(),i("div",ot,[(n(!0),i(j,null,U(h.value,s=>(n(),i("div",{key:s.seller_id,class:"flex justify-between text-xs text-gray-600"},[t("span",at,r(s.seller_name)+":",1),t("span",null,"$"+r(s.shipping_cost.toFixed(2)),1)]))),128))])):k("",!0),t("div",rt,[e[50]||(e[50]=t("span",null,"Tax:",-1)),t("span",null,"$"+r(S.value.toFixed(2))+" CAD",1)]),t("div",it,[e[51]||(e[51]=t("span",null,"Total:",-1)),t("span",null,"$"+r(P.value.toFixed(2))+" CAD",1)])]),e[53]||(e[53]=F('<div class="mt-6 pt-6 border-t border-gray-200" data-v-c83309c3><div class="text-center" data-v-c83309c3><p class="text-xs text-gray-500 mb-2" data-v-c83309c3>Payment Security</p><div class="flex items-center justify-center space-x-2 text-xs text-gray-600" data-v-c83309c3><div class="flex items-center" data-v-c83309c3><svg class="h-4 w-4 mr-1 text-green-500" fill="currentColor" viewBox="0 0 20 20" data-v-c83309c3><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" data-v-c83309c3></path></svg> SSL Secure </div><div class="flex items-center" data-v-c83309c3><svg class="h-4 w-4 mr-1 text-blue-500" fill="currentColor" viewBox="0 0 20 20" data-v-c83309c3><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-c83309c3></path></svg> PCI Compliant </div></div><p class="text-xs text-gray-500 mt-2" data-v-c83309c3>Powered by HelcimPay</p></div></div>',1))])])]),x.value?(n(),i("div",nt,[t("div",dt,[e[56]||(e[56]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),t("div",ut,[e[55]||(e[55]=t("h3",{class:"text-sm font-medium text-red-800"}," Checkout Error ",-1)),t("div",ct,r(x.value),1)])])])):k("",!0)])]))}},gt=X(pt,[["__scopeId","data-v-c83309c3"]]);export{gt as default};
