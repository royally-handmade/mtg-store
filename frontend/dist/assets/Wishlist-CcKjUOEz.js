import{c as d,b as n,d as e,G as V,r as k,n as W,f as x,i,H as I,t as p,q as M,J as F,L,p as N,e as w,v as U,s as O,N as q,T as z,Q as G,o as H,a as J,g as S,l as j,R as P,w as Z,h as Q,k as Y,F as K,j as X,U as ee}from"./index-D5lSLxc0.js";import{r as te}from"./ExclamationTriangleIcon-qqwZ6LDi.js";import{r as se}from"./TrashIcon-Ok0xa92g.js";import{r as re}from"./CheckCircleIcon-CPskrV3K.js";function oe(c,b){return n(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}function le(c,b){return n(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}function ne(c,b){return n(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})])}function ae(c,b){return n(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}const ie={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ce={class:"bg-white rounded-lg p-6 w-full max-w-md"},de={class:"flex justify-between items-center mb-6"},ue={class:"space-y-4"},me={class:"bg-gray-50 rounded-lg p-4"},pe={class:"text-sm text-gray-600"},ge={class:"space-y-3"},xe={__name:"ShareWishlistModal",props:{wishlistItems:{type:Array,required:!0}},emits:["close"],setup(c,{emit:b}){const s=c,m=V(),g=k(""),v=W(()=>s.wishlistItems.reduce((u,r)=>{var $;return u+parseFloat((($=r.cards)==null?void 0:$.market_price)||0)},0).toFixed(2)),f=()=>{const r=`Check out my MTG wishlist! ${s.wishlistItems.length} cards worth $${v.value} CAD`;return g.value?`${r}

${g.value}`:r},h=()=>`${window.location.origin}/wishlist/shared/${btoa(JSON.stringify(s.wishlistItems.map(u=>u.card_id)))}`,C=async()=>{try{await navigator.clipboard.writeText(h()),m.success("Link copied to clipboard!")}catch{m.error("Failed to copy link")}},y=()=>{const u=encodeURIComponent("My MTG Wishlist"),r=encodeURIComponent(`${f()}

View my wishlist: ${h()}`);window.open(`mailto:?subject=${u}&body=${r}`)},a=()=>{const u=encodeURIComponent(f()),r=encodeURIComponent(h());window.open(`https://twitter.com/intent/tweet?text=${u}&url=${r}`)},_=()=>{const u=encodeURIComponent(h());window.open(`https://www.facebook.com/sharer/sharer.php?u=${u}`)};return(u,r)=>(n(),d("div",ie,[e("div",ce,[e("div",de,[r[2]||(r[2]=e("h2",{class:"text-xl font-bold"},"Share Wishlist",-1)),e("button",{onClick:r[0]||(r[0]=$=>u.$emit("close")),class:"text-gray-500 hover:text-gray-700"},[x(i(I),{class:"h-6 w-6"})])]),e("div",ue,[e("div",me,[e("div",pe,p(c.wishlistItems.length)+" items • Total value: $"+p(v.value)+" CAD ",1)]),e("div",ge,[e("button",{onClick:C,class:"w-full flex items-center space-x-3 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},[x(i(ne),{class:"h-5 w-5 text-gray-500"}),r[3]||(r[3]=e("span",null,"Copy Link",-1))]),e("button",{onClick:y,class:"w-full flex items-center space-x-3 px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},[x(i(le),{class:"h-5 w-5 text-gray-500"}),r[4]||(r[4]=e("span",null,"Share by Email",-1))]),e("button",{onClick:a,class:"w-full flex items-center space-x-3 px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"},[...r[5]||(r[5]=[e("span",{class:"text-lg"},"🐦",-1),e("span",null,"Share on Twitter",-1)])]),e("button",{onClick:_,class:"w-full flex items-center space-x-3 px-4 py-3 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition-colors"},[...r[6]||(r[6]=[e("span",{class:"text-lg"},"📘",-1),e("span",null,"Share on Facebook",-1)])])]),e("div",null,[r[7]||(r[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Custom Message (Optional) ",-1)),M(e("textarea",{"onUpdate:modelValue":r[1]||(r[1]=$=>g.value=$),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add a personal message..."},null,512),[[F,g.value]])])])])]))}},be={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ve={class:"bg-white rounded-lg p-6 w-full max-w-md"},he={class:"flex items-center space-x-3 mb-4"},ye={class:"text-xl font-bold text-gray-900"},fe={class:"text-gray-600 mb-6"},we={class:"flex space-x-3"},ke={__name:"ConfirmModal",props:{title:{type:String,default:"Confirm Action"},message:{type:String,required:!0},confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"},confirmClass:{type:String,default:"bg-blue-600 hover:bg-blue-700"}},emits:["confirm","cancel"],setup(c){return(b,s)=>(n(),d("div",be,[e("div",ve,[e("div",he,[x(i(te),{class:"h-8 w-8 text-yellow-500"}),e("h2",ye,p(c.title),1)]),e("p",fe,p(c.message),1),e("div",we,[e("button",{onClick:s[0]||(s[0]=m=>b.$emit("cancel")),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},p(c.cancelText),1),e("button",{onClick:s[1]||(s[1]=m=>b.$emit("confirm")),class:L(["flex-1 px-4 py-2 text-white rounded-lg transition-colors",c.confirmClass])},p(c.confirmText),3)])])]))}},Ce={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},$e={class:"bg-white rounded-lg p-6 w-full max-w-md"},_e={class:"flex justify-between items-center mb-6"},Ae={class:"space-y-4"},Se={key:0,class:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg"},Me=["src","alt"],Te={class:"font-medium"},je={class:"text-sm text-gray-600"},Pe={class:"relative"},Ve=["max"],We={class:"flex space-x-3 pt-4"},Ie=["disabled"],Fe={__name:"PriceAlertModal",props:{card:{type:Object,required:!0},currentMaxPrice:{type:Number,default:null}},emits:["save","close","remove"],setup(c,{emit:b}){const s=c,m=b,g=k(s.currentMaxPrice||""),v=k(""),f=W(()=>g.value&&g.value>0&&g.value<=parseFloat(s.card.cards.market_price)),h=()=>{f.value&&m("save",g.value,v.value)},C=()=>{m("remove")};return N(()=>s.currentMaxPrice,y=>{g.value=y||""},{immediate:!0}),(y,a)=>{var _;return n(),d("div",Ce,[e("div",$e,[e("div",_e,[a[4]||(a[4]=e("h2",{class:"text-xl font-bold"},"Set Price Alert",-1)),e("button",{onClick:a[0]||(a[0]=u=>y.$emit("close")),class:"text-gray-500 hover:text-gray-700"},[x(i(I),{class:"h-6 w-6"})])]),e("div",Ae,[c.card?(n(),d("div",Se,[e("img",{src:c.card.cards.image_url,alt:c.card.cards.name,class:"w-12 h-16 object-cover rounded"},null,8,Me),e("div",null,[e("div",Te,p(c.card.cards.name),1),e("div",je,"Current: $"+p(c.card.cards.market_price)+" CAD",1)])])):w("",!0),e("div",null,[a[6]||(a[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Alert me when price drops to or below: ",-1)),e("div",Pe,[M(e("input",{"onUpdate:modelValue":a[1]||(a[1]=u=>g.value=u),type:"number",step:"0.01",min:"0",max:(_=c.card)==null?void 0:_.cards.market_price,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"},null,8,Ve),[[F,g.value,void 0,{number:!0}]]),a[5]||(a[5]=e("span",{class:"absolute right-3 top-2 text-gray-500"},"CAD",-1))]),a[7]||(a[7]=e("p",{class:"text-xs text-gray-500 mt-1"}," Set a price below the current market price to get notified of drops ",-1))]),e("div",null,[a[9]||(a[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Condition Preference (Optional) ",-1)),M(e("select",{"onUpdate:modelValue":a[2]||(a[2]=u=>v.value=u),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[...a[8]||(a[8]=[O('<option value="">Any condition</option><option value="nm">Near Mint or better</option><option value="lp">Lightly Played or better</option><option value="mp">Moderately Played or better</option><option value="hp">Heavily Played or better</option>',5)])],512),[[U,v.value]])]),e("div",We,[e("button",{onClick:a[3]||(a[3]=u=>y.$emit("close")),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{onClick:h,disabled:!f.value,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors"}," Set Alert ",8,Ie),c.currentMaxPrice?(n(),d("button",{key:0,onClick:C,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"}," Remove ")):w("",!0)])])])])}}},De={class:"space-y-6"},Be={class:"flex justify-between items-center"},Ee={class:"text-gray-600 mt-1"},Re={class:"flex space-x-3"},Le=["disabled"],Ne={key:0,class:"flex justify-center items-center py-12"},Ue={key:1,class:"text-center py-12"},Oe={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},qe={class:"overflow-hidden rounded-t-lg relative"},ze=["src","alt","onClick"],Ge={class:"absolute top-2 right-2 flex space-x-1"},He=["onClick"],Je={class:"p-4"},Ze=["onClick"],Qe={class:"text-sm text-gray-600 mb-2"},Ye={class:"flex justify-between items-center mb-3"},Ke={class:"text-lg font-bold text-green-600"},Xe={key:0,class:"text-sm text-blue-600"},et={key:0,class:"mb-3"},tt={key:0,class:"flex items-center space-x-1 text-sm text-green-600 bg-green-50 px-2 py-1 rounded"},st={key:1,class:"flex items-center space-x-1 text-sm text-gray-500"},rt={class:"text-xs text-gray-400 mb-3"},ot={class:"space-y-2"},lt=["onClick","disabled"],nt=["onClick"],ut={__name:"Wishlist",setup(c){const b=q(),{wishlistStore:s}=z();G();const m=V(),g=k(!1),v=k(!1),f=k(!1),h=k(!1),C=k(null),y=k(null),a=async o=>{try{await s.removeFromWishlist(o),m.success("Removed from wishlist")}catch{m.error("Error removing from wishlist")}},_=async o=>{C.value=o;try{await s.addItemToCart(o),m.success("Added to cart")}catch(t){m.error(t.message||"Error adding to cart")}finally{C.value=null}},u=async()=>{h.value=!0;try{const o=await s.addAllToCart();o.successCount>0&&m.success(`Added ${o.successCount} items to cart`),o.failCount>0&&m.warning(`${o.failCount} items could not be added`),o.successCount>0&&b.push("/cart")}catch{m.error("Error adding items to cart")}finally{h.value=!1}},r=async()=>{try{await s.clearWishlist(),m.success("Wishlist cleared"),v.value=!1}catch{m.error("Error clearing wishlist")}},$=o=>{y.value=o,f.value=!0},D=async o=>{try{await s.updateWishlistItem(y.value.card_id,{max_price:o}),m.success("Price alert updated!"),f.value=!1}catch{m.error("Error updating price alert")}},B=o=>!o.max_price||!o.cards.market_price?!1:parseFloat(o.cards.market_price)<=parseFloat(o.max_price),E=o=>new Date(o).toLocaleDateString();return H(async()=>{try{await s.fetchWishlist()}catch{m.error("Error loading wishlist")}}),(o,t)=>{var T;const R=J("router-link");return n(),d("div",De,[e("div",Be,[e("div",null,[t[5]||(t[5]=e("h1",{class:"text-3xl font-bold"},"My Wishlist",-1)),e("p",Ee,p(i(s).itemCount)+" items • Total value: $"+p(i(s).totalValue)+" CAD ",1)]),e("div",Re,[i(s).itemCount>0?(n(),d("button",{key:0,onClick:t[0]||(t[0]=l=>g.value=!0),class:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},[x(i(ae),{class:"h-5 w-5"}),t[6]||(t[6]=e("span",null,"Share",-1))])):w("",!0),i(s).itemCount>0?(n(),d("button",{key:1,onClick:u,disabled:h.value,class:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors"},[x(i(j),{class:"h-5 w-5"}),e("span",null,p(h.value?"Adding...":"Add All to Cart"),1)],8,Le)):w("",!0),i(s).itemCount>0?(n(),d("button",{key:2,onClick:t[1]||(t[1]=l=>v.value=!0),class:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"},[x(i(se),{class:"h-5 w-5"}),t[7]||(t[7]=e("span",null,"Clear All",-1))])):w("",!0)])]),i(s).loading?(n(),d("div",Ne,[...t[8]||(t[8]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):i(s).itemCount===0?(n(),d("div",Ue,[x(i(P),{class:"h-16 w-16 text-gray-300 mx-auto mb-4"}),t[10]||(t[10]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"Your wishlist is empty",-1)),t[11]||(t[11]=e("p",{class:"text-gray-600 mb-6"},"Start adding cards you want to your wishlist!",-1)),x(R,{to:"/cards",class:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:Z(()=>[x(i(Y),{class:"h-5 w-5 mr-2"}),t[9]||(t[9]=Q(" Browse Cards ",-1))]),_:1})])):(n(),d("div",Oe,[(n(!0),d(K,null,X(i(s).items,l=>(n(),d("div",{key:l.id,class:"bg-white rounded-lg shadow border hover:shadow-lg transition-shadow"},[e("div",qe,[e("img",{src:l.cards.image_url,alt:l.cards.name,class:"w-full h-full object-cover cursor-pointer hover:scale-105 transition-transform duration-300",onClick:A=>o.$router.push(`/card/${l.card_id}`)},null,8,ze),e("div",Ge,[e("button",{onClick:A=>a(l.card_id),class:"p-2 bg-black bg-opacity-50 rounded-full text-white hover:bg-opacity-70 transition-all",title:"Remove from wishlist"},[x(i(P),{class:"h-4 w-4 fill-current text-red-500"})],8,He)])]),e("div",Je,[e("h3",{class:"font-semibold text-lg mb-1 truncate cursor-pointer hover:text-blue-600",onClick:A=>o.$router.push(`/card/${l.card_id}`)},p(l.cards.name),9,Ze),e("p",Qe,p(l.cards.set_number)+" • "+p(l.cards.rarity),1),e("div",Ye,[e("span",Ke," $"+p(l.cards.market_price||"0.00")+" CAD ",1),l.max_price?(n(),d("span",Xe," Alert: $"+p(l.max_price),1)):w("",!0)]),l.max_price?(n(),d("div",et,[B(l)?(n(),d("div",tt,[x(i(re),{class:"h-4 w-4"}),t[12]||(t[12]=e("span",null,"Price Alert!",-1))])):(n(),d("div",st,[x(i(ee),{class:"h-4 w-4"}),t[13]||(t[13]=e("span",null,"Watching price",-1))]))])):w("",!0),e("p",rt," Added "+p(E(l.created_at)),1),e("div",ot,[e("button",{onClick:A=>_(l.card_id),disabled:C.value===l.card_id,class:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors"},[x(i(j),{class:"h-4 w-4"}),e("span",null,p(C.value===l.card_id?"Adding...":"Add to Cart"),1)],8,lt),e("button",{onClick:A=>$(l),class:"w-full flex items-center justify-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"},[x(i(oe),{class:"h-4 w-4"}),e("span",null,p(l.max_price?"Edit Alert":"Set Price Alert"),1)],8,nt)])])]))),128))])),g.value?(n(),S(xe,{key:3,"wishlist-items":i(s).items,onClose:t[2]||(t[2]=l=>g.value=!1)},null,8,["wishlist-items"])):w("",!0),v.value?(n(),S(ke,{key:4,title:"Clear Wishlist",message:"Are you sure you want to remove all items from your wishlist? This action cannot be undone.","confirm-text":"Clear All","confirm-class":"bg-red-600 hover:bg-red-700",onConfirm:r,onCancel:t[3]||(t[3]=l=>v.value=!1)})):w("",!0),f.value?(n(),S(Fe,{key:5,card:y.value,"current-max-price":(T=y.value)==null?void 0:T.max_price,onSave:D,onClose:t[4]||(t[4]=l=>f.value=!1)},null,8,["card","current-max-price"])):w("",!0)])}}};export{ut as default};
