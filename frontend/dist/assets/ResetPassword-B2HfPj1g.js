import{N as q,P as I,u as R,G as T,r as o,n as U,o as _,a as B,c as r,b as l,d as e,e as u,I as E,q as y,J as k,t as g,f as n,i as c,w as h,h as P}from"./index-D5lSLxc0.js";import{r as M}from"./CheckCircleIcon-CPskrV3K.js";import{r as N}from"./ExclamationTriangleIcon-qqwZ6LDi.js";const L={class:"max-w-md mx-auto bg-white rounded-lg shadow-lg p-8"},D=["disabled"],F={key:1,class:"text-center space-y-4"},A={class:"text-green-600"},G={key:2,class:"mt-4 p-3 bg-red-100 border border-red-300 rounded text-red-700"},J={class:"flex items-center"},Y={key:3,class:"text-center space-y-4"},$={class:"text-red-600"},O={__name:"ResetPassword",setup(j){const S=q();I();const w=R(),v=T(),d=o(!1),m=o(!1),f=o(!1),a=o(""),t=o({password:"",confirmPassword:""}),b=U(()=>t.value.password.length>=6&&t.value.password===t.value.confirmPassword),C=async()=>{if(!b.value){a.value="Passwords must match and be at least 6 characters";return}d.value=!0,a.value="";try{await w.updatePassword(t.value.password),m.value=!0,v.success("Password updated successfully!")}catch(i){a.value=i.message||"Failed to update password"}finally{d.value=!1}},V=()=>{S.push("/auth"),v.info("Please request a new password reset link")};return _(async()=>{try{await w.validateResetSession()}catch(i){f.value=!0,console.error("Invalid reset session:",i)}}),(i,s)=>{const x=B("router-link");return l(),r("div",L,[s[11]||(s[11]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-bold"},"Set New Password"),e("p",{class:"text-gray-600 mt-2"}," Enter your new password below ")],-1)),m.value?u("",!0):(l(),r("form",{key:0,onSubmit:E(C,["prevent"]),class:"space-y-6"},[e("div",null,[s[2]||(s[2]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"New Password",-1)),y(e("input",{"onUpdate:modelValue":s[0]||(s[0]=p=>t.value.password=p),type:"password",required:"",class:"input-field",placeholder:"Enter new password",minlength:"6"},null,512),[[k,t.value.password]]),s[3]||(s[3]=e("p",{class:"text-xs text-gray-500 mt-1"},"Minimum 6 characters",-1))]),e("div",null,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Confirm Password",-1)),y(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>t.value.confirmPassword=p),type:"password",required:"",class:"input-field",placeholder:"Confirm new password"},null,512),[[k,t.value.confirmPassword]])]),e("button",{type:"submit",disabled:d.value||!b.value,class:"w-full btn-primary disabled:opacity-50"},g(d.value?"Updating...":"Update Password"),9,D)],32)),m.value?(l(),r("div",F,[e("div",A,[n(c(M),{class:"h-16 w-16 mx-auto mb-4"}),s[5]||(s[5]=e("h2",{class:"text-xl font-semibold"},"Password Updated!",-1)),s[6]||(s[6]=e("p",{class:"text-gray-600 mt-2"},"Your password has been successfully updated.",-1))]),n(x,{to:"/auth",class:"btn-primary inline-block"},{default:h(()=>[...s[7]||(s[7]=[P(" Sign In with New Password ",-1)])]),_:1})])):u("",!0),a.value?(l(),r("div",G,[e("div",J,[n(c(N),{class:"h-5 w-5 mr-2"}),e("span",null,g(a.value),1)])])):u("",!0),f.value?(l(),r("div",Y,[e("div",$,[n(c(N),{class:"h-16 w-16 mx-auto mb-4"}),s[8]||(s[8]=e("h2",{class:"text-xl font-semibold"},"Invalid or Expired Link",-1)),s[9]||(s[9]=e("p",{class:"text-gray-600 mt-2"}," This password reset link is invalid or has expired. ",-1))]),n(x,{to:"/auth",class:"btn-secondary inline-block mr-2"},{default:h(()=>[...s[10]||(s[10]=[P(" Back to Sign In ",-1)])]),_:1}),e("button",{onClick:V,class:"btn-primary"}," Request New Link ")])):u("",!0)])}}};export{O as default};
