import{u as I,G as W,T as A,r as m,n as b,p as k,c as u,b as c,d as r,e as p,f as P,L as v,i as S,R as B,t as f,q as T,J as C}from"./index-D5lSLxc0.js";const V={class:"wishlist-button-container"},D=["disabled"],E={key:0},N={key:1,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"},R={key:0,class:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg"},q={class:"flex space-x-2"},G={class:"flex-1"},L=["disabled"],z={__name:"WishlistButton",props:{cardId:{type:String,required:!0},showText:{type:Boolean,default:!0},showPriceAlert:{type:Boolean,default:!0}},setup(h){const i=h,g=I(),t=W(),{wishlistStore:l}=A(),n=m(!1),d=m(!1),s=m(""),o=b(()=>l.isInWishlist(i.cardId)),x=b(()=>l.items.find(e=>e.card_id===i.cardId)),y=async()=>{if(!g.isAuthenticated){t.error("Please sign in to use the wishlist");return}n.value=!0;try{o.value?(await l.removeFromWishlist(i.cardId),t.success("Removed from wishlist"),s.value=""):(await l.addToWishlist(i.cardId),t.success("Added to wishlist"))}catch(e){t.error(e.message||"Error updating wishlist")}finally{n.value=!1}},w=async()=>{if(!s.value||s.value<=0){t.error("Please enter a valid price");return}d.value=!0;try{await l.updateWishlistItem(i.cardId,{max_price:s.value}),t.success("Price alert set!")}catch{t.error("Error setting price alert")}finally{d.value=!1}};return k(()=>x.value,e=>{e&&e.max_price&&(s.value=e.max_price)},{immediate:!0}),(e,a)=>(c(),u("div",V,[r("button",{onClick:y,class:v(["wishlist-button flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-200",o.value?"bg-red-100 text-red-600 border-red-300 hover:bg-red-200":"bg-gray-100 text-gray-600 border-gray-300 hover:bg-gray-200","border"]),disabled:n.value},[P(S(B),{class:v(["h-5 w-5 transition-all duration-200",o.value?"fill-current text-red-500":"text-gray-500"])},null,8,["class"]),h.showText?(c(),u("span",E,f(o.value?"Remove from Wishlist":"Add to Wishlist"),1)):p("",!0),n.value?(c(),u("div",N)):p("",!0)],10,D),o.value&&h.showPriceAlert?(c(),u("div",R,[a[1]||(a[1]=r("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ðŸ’° Price Alert (Optional) ",-1)),r("div",q,[r("div",G,[T(r("input",{"onUpdate:modelValue":a[0]||(a[0]=_=>s.value=_),type:"number",step:"0.01",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Max price (CAD)"},null,512),[[C,s.value,void 0,{number:!0}]])]),r("button",{onClick:w,disabled:d.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 disabled:opacity-50 transition-colors"},f(d.value?"Saving...":"Set Alert"),9,L)]),a[2]||(a[2]=r("p",{class:"text-xs text-gray-500 mt-1"}," Get notified when this card drops below your price ",-1))])):p("",!0)]))}};export{z as _};
